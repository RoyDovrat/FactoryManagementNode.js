<html>
  <body>
    <h2>Login Page</h2>
    <div>
      Username: <input type="text" id="username" /> <br />
      Email: <input type="email" id="email" /> <br />
      <button onclick="login()">Login</button>
    </div>
    <p id="error" style="color:red"></p>

    <script>
      const url = 'http://localhost:3000/auth/login';

      const login = async () => {

        //need to send to server obj with username and email
        const loginData = {
          username: document.getElementById('username').value,
          email: document.getElementById('email').value
        };

        try {
          //sending a request to the server with the obj in json form 
          const resp = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(loginData),
          });

          if (resp.ok) {
            const data = await resp.json();
            sessionStorage.setItem('token', data.token);  
            sessionStorage.setItem('fullName', data.fullName);
            location.href = './menuPage.html';
          } else {
            document.getElementById('error').innerText = 'Invalid username or email';
          }
          } catch (error) {
            document.getElementById('error').innerText = 'An error occurred. Please try again.';
          }
      };

    </script>
  </body>
</html>